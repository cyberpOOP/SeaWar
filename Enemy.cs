using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Drawing;
using System.Windows.Forms;

namespace SeaWarFinal
{
    public class Enemy
    {
        private int[,] myMap;
        private int[,] enemymap;
        private Button[,] myButtons;

        public Enemy(int[,] myMap, int[,] enemyMap, Button[,] myButtons)
        {
            this.myMap = myMap;
            this.enemymap = enemyMap;
            this.myButtons = myButtons;
        }

        public int[,] Map(int [,] map)
        {
            Random r = new Random();

            int[,,] defaultMap = new int[7, 11, 11] {  {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //0
                                                       {0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0},
                                                       {0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0},
                                                       {0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0},
                                                       {0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0},
                                                       {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0},
                                                       {0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0}},

                                                      {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //1
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1},
                                                       {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1},
                                                       {0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0}},


                                                      {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //2
                                                       {0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
                                                       {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0},
                                                       {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0},
                                                       {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0},
                                                       {0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0}},


                                                      {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //3
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0},
                                                       {0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                                       {0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
                                                       {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0},
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0}},


                                                      {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //4
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1},
                                                       {0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
                                                       {0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                                       {0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                                       {0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1}},


                                                      {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //5
                                                       {0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0},
                                                       {0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0},
                                                       {0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0},
                                                       {0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0},
                                                       {0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0},
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0},
                                                       {0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0}},

                                                      {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, // 6->debug
                                                       {0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0},
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
                                                       {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1},
                                                       {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                                       {0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1}}
                                            };

            int z = r.Next(0, 6);
            //Console.WriteLine("\n"+z);
            //z = 6; //sets debug map active
            

            for (int i=0; i<11; i++)
            {
                for(int j=0; j<11; j++)
                {
                    map[i,j] = defaultMap[z,i,j];
                }
            }
                
                    

            return map;

        }

        public void Shoot()
        {

            Random r = new Random();

            bool flag = true;

            while (flag)
            {
                int i = r.Next(1, 11);
                int j = r.Next(1, 11);

                if (myMap[i, j] > -1)
                {

                    //Console.WriteLine("Bot Shoot:" + myMap[i, j] + " " + i + " " + j);

                    if (myMap[i, j] == 0)
                    {
                        myButtons[i, j].BackColor = Color.Black;
                        myMap[i, j] = -1;
                        flag = false;
                    }
                    if (myMap[i, j] == 1)
                    {
                        myButtons[i, j].BackColor = Color.Red;
                        myButtons[i, j].Text = "X";
                        myMap[i, j] = -2;
                    }

                }
            }
        }

    }
}
